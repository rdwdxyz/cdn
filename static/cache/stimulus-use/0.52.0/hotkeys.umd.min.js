!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("hotkeys-js")):"function"==typeof define&&define.amd?define(["exports","hotkeys-js"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).StimulusUseHotkeys={},e.hotkeys)}(this,function(e,t){"use strict";var n,i=(n=t)&&"object"==typeof n&&"default"in n?n:{default:n};let o={debug:!1,logger:console,dispatchEvent:!0,eventPrefix:!0};class l{constructor(e,t={}){var n,i,l;this.log=(e,t)=>{this.debug&&(this.logger.groupCollapsed(`%c${this.controller.identifier} %c#${e}`,"color: #3B82F6","color: unset"),this.logger.log(Object.assign({controllerId:this.controllerId},t)),this.logger.groupEnd())},this.warn=e=>{this.logger.warn(`%c${this.controller.identifier} %c${e}`,"color: #3B82F6; font-weight: bold","color: unset")},this.dispatch=(e,t={})=>{if(this.dispatchEvent){let{event:n}=t,i=function e(t,n){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&0>n.indexOf(o)&&(i[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,o=Object.getOwnPropertySymbols(t);l<o.length;l++)0>n.indexOf(o[l])&&Object.prototype.propertyIsEnumerable.call(t,o[l])&&(i[o[l]]=t[o[l]]);return i}(t,["event"]),o=this.extendedEvent(e,n||null,i);this.targetElement.dispatchEvent(o),this.log("dispatchEvent",Object.assign({eventName:o.type},i))}},this.call=(e,t={})=>{let n=this.controller[e];if("function"==typeof n)return n.call(this.controller,t)},this.extendedEvent=(e,t,n)=>{let{bubbles:i,cancelable:o,composed:l}=t||{bubbles:!0,cancelable:!0,composed:!0};t&&Object.assign(n,{originalEvent:t});let s=new CustomEvent(this.composeEventName(e),{bubbles:i,cancelable:o,composed:l,detail:n});return s},this.composeEventName=e=>{let t=e;return!0===this.eventPrefix?t=`${this.controller.identifier}:${e}`:"string"==typeof this.eventPrefix&&(t=`${this.eventPrefix}:${e}`),t},this.debug=null!==(i=null!==(n=null==t?void 0:t.debug)&&void 0!==n?n:e.application.stimulusUseDebug)&&void 0!==i?i:o.debug,this.logger=null!==(l=null==t?void 0:t.logger)&&void 0!==l?l:o.logger,this.controller=e,this.controllerId=e.element.id||e.element.dataset.id,this.targetElement=(null==t?void 0:t.element)||e.element;let{dispatchEvent:s,eventPrefix:r}=Object.assign({},o,t);Object.assign(this,{dispatchEvent:s,eventPrefix:r}),this.controllerInitialize=e.initialize.bind(e),this.controllerConnect=e.connect.bind(e),this.controllerDisconnect=e.disconnect.bind(e)}}class s extends l{constructor(e,t){super(e,t),this.bind=()=>{for(let[e,t]of Object.entries(this.hotkeysOptions.hotkeys)){let n=t.handler.bind(this.controller);i.default(e,t.options,e=>n(e,e))}},this.unbind=()=>{for(let e in this.hotkeysOptions.hotkeys)i.default.unbind(e)},this.controller=e,this.hotkeysOptions=t,this.enhanceController(),this.bind()}enhanceController(){this.hotkeysOptions.filter&&(i.default.filter=this.hotkeysOptions.filter);let e=this.controller.disconnect.bind(this.controller),t=()=>{this.unbind(),e()};Object.assign(this.controller,{disconnect:t})}}let r=e=>({handler:e[0],options:{element:e[1]}}),h=e=>{if(!e.hotkeys){let t={};Object.entries(e).forEach(([e,n])=>{Object.defineProperty(t,e,{value:r(n),writable:!1,enumerable:!0})}),e={hotkeys:t}}return e},c=(e,t)=>new s(e,h(t));e.useHotkeys=c,Object.defineProperty(e,"__esModule",{value:!0})});
